<div class="contact-form">
    <h2>Nous Contacter</h2>
    
    <form [formGroup]="messageForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="name">Nom</label>
        <input type="text" id="name" formControlName="name">
        <div *ngIf="name?.invalid && (name?.dirty || name?.touched)" class="error-message">
          <div *ngIf="name?.errors?.['required']">Le nom est obligatoire</div>
          <div *ngIf="name?.errors?.['minlength']">Le nom doit contenir au moins 2 caractères</div>
        </div>
      </div>
  
      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" formControlName="email">
        <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="error-message">
          <div *ngIf="email?.errors?.['required']">L'email est obligatoire</div>
          <div *ngIf="email?.errors?.['email']">Veuillez entrer un email valide</div>
        </div>
      </div>
  
      <div class="form-group">
        <label for="subject">Sujet</label>
        <input type="text" id="subject" formControlName="subject">
        <div *ngIf="subject?.invalid && (subject?.dirty || subject?.touched)" class="error-message">
          <div *ngIf="subject?.errors?.['required']">Le sujet est obligatoire</div>
          <div *ngIf="subject?.errors?.['minlength']">Le sujet doit contenir au moins 5 caractères</div>
        </div>
      </div>
  
      <div class="form-group">
        <label for="message">Message</label>
        <textarea id="message" formControlName="message" rows="5"></textarea>
        <div *ngIf="message?.invalid && (message?.dirty || message?.touched)" class="error-message">
          <div *ngIf="message?.errors?.['required']">Le message est obligatoire</div>
          <div *ngIf="message?.errors?.['minlength']">Le message doit contenir au moins 10 caractères</div>
        </div>
      </div>
  
      <div *ngIf="errorMessage" class="error-message server-error">
        {{ errorMessage }}
      </div>
  
      <div *ngIf="submitSuccess" class="success-message">
        Message envoyé avec succès !
      </div>
  
      <button type="submit" [disabled]="messageForm.invalid || isSubmitting">
        <span *ngIf="!isSubmitting">Envoyer le message</span>
        <span *ngIf="isSubmitting">Envoi en cours...</span>
      </button>
    </form>
</div>